<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openurlgae: DatastoreStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>store</b>::<a class="el" href="classstore_1_1_datastore_store.html">DatastoreStore</a>
  </div>
</div>
<div class="contents">
<h1>DatastoreStore Class Reference</h1><!-- doxytag: class="store::DatastoreStore" --><!-- doxytag: inherits="openid::store::interface::OpenIDStore" -->
<p>Inherits openid::store::interface::OpenIDStore.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#a96d33bc3a91fc597ec6fcc8120d961c6">storeAssociation</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#aaf2df6459c2940919588271aac977737">getAssociation</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#a3f3b41858d8326ca355d54dc3bcc77e2">removeAssociation</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#ad258dd03f30440f64f4ea0a6282d4cfe">useNonce</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#ac65c7bb38963ee695d8b1ccd854a52c3">cleanupNonces</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#a18ca2f5045bc1a084a7bd18de9a8485f">cleanupAssociations</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstore_1_1_datastore_store.html#a46e9520c1de28fd7d3235bc75e376a0d">cleanup</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">An OpenIDStore implementation that uses the datastore. See
openid/store/interface.py for in-depth descriptions of the methods.

They follow the OpenID python library's style, not Google's style, since
they override methods defined in the OpenIDStore class.
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00055">55</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a46e9520c1de28fd7d3235bc75e376a0d"></a><!-- doxytag: member="store::DatastoreStore::cleanup" ref="a46e9520c1de28fd7d3235bc75e376a0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def cleanup </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Shortcut for C{L{cleanupNonces}()}, C{L{cleanupAssociations}()}.

This method is not called in the normal operation of the
library.  It provides a way for store admins to keep
their storage from filling up with expired data.
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00175">175</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="a18ca2f5045bc1a084a7bd18de9a8485f"></a><!-- doxytag: member="store::DatastoreStore::cleanupAssociations" ref="a18ca2f5045bc1a084a7bd18de9a8485f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def cleanupAssociations </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Remove expired associations from the store.

This method is not called in the normal operation of the
library.  It provides a way for store admins to keep
their storage from filling up with expired data.

@return: the number of associations expired.
@returntype: int
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00162">162</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="ac65c7bb38963ee695d8b1ccd854a52c3"></a><!-- doxytag: member="store::DatastoreStore::cleanupNonces" ref="ac65c7bb38963ee695d8b1ccd854a52c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def cleanupNonces </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Remove expired nonces from the store.

Discards any nonce from storage that is old enough that its
timestamp would not pass L{useNonce}.

This method is not called in the normal operation of the
library.  It provides a way for store admins to keep
their storage from filling up with expired data.

@return: the number of nonces expired.
@returntype: int
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00146">146</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="aaf2df6459c2940919588271aac977737"></a><!-- doxytag: member="store::DatastoreStore::getAssociation" ref="aaf2df6459c2940919588271aac977737" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getAssociation </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>server_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>handle</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">
This method returns an C{L{Association &lt;openid.association.Association&gt;}}
object from storage that matches the server URL and, if specified, handle.
It returns C{None} if no such association is found or if the matching
association is expired.

If no handle is specified, the store may return any association which
matches the server URL. If multiple associations are valid, the
recommended return value for this method is the one that will remain valid
for the longest duration.
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00073">73</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="a3f3b41858d8326ca355d54dc3bcc77e2"></a><!-- doxytag: member="store::DatastoreStore::removeAssociation" ref="a3f3b41858d8326ca355d54dc3bcc77e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def removeAssociation </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>server_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">
This method removes the matching association if it's found, and returns
whether the association was removed or not.
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00098">98</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="a96d33bc3a91fc597ec6fcc8120d961c6"></a><!-- doxytag: member="store::DatastoreStore::storeAssociation" ref="a96d33bc3a91fc597ec6fcc8120d961c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def storeAssociation </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>server_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>association</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">
This method puts a C{L{Association &lt;openid.association.Association&gt;}}
object into storage, retrievable by server URL and handle.
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00063">63</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<a class="anchor" id="ad258dd03f30440f64f4ea0a6282d4cfe"></a><!-- doxytag: member="store::DatastoreStore::useNonce" ref="ad258dd03f30440f64f4ea0a6282d4cfe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def useNonce </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>server_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>salt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Called when using a nonce.

This method should return C{True} if the nonce has not been
used before, and store it for a while to make sure nobody
tries to use the same value again.  If the nonce has already
been used or the timestamp is not current, return C{False}.

You may use L{openid.store.nonce.SKEW} for your timestamp window.

@change: In earlier versions, round-trip nonces were used and
   a nonce was only valid if it had been previously stored
   with C{storeNonce}.  Version 2.0 uses one-way nonces,
   requiring a different implementation here that does not
   depend on a C{storeNonce} call.  (C{storeNonce} is no
   longer part of the interface.)

@param server_url: The URL of the server from which the nonce
originated.

@type server_url: C{str}

@param timestamp: The time that the nonce was created (to the
nearest second), in seconds since January 1 1970 UTC.
@type timestamp: C{int}

@param salt: A random string that makes two nonces from the
same server issued during the same second unique.
@type salt: str

@return: Whether or not the nonce was valid.

@rtype: C{bool}
</pre></div> 
<p>Definition at line <a class="el" href="store_8py_source.html#l00107">107</a> of file <a class="el" href="store_8py_source.html">store.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/root/google/openurlgae/<a class="el" href="store_8py_source.html">store.py</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Nov 2011 for openurlgae by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
